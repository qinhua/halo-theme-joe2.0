!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var a=e();for(var o in a)("object"==typeof exports?exports:t)[o]=a[o]}}(self,(function(){return(()=>{"use strict";var t={};function e(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function a(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function o(t){for(var o=1;o<arguments.length;o++){var n=null!=arguments[o]?arguments[o]:{};o%2?a(Object(n),!0).forEach((function(a){e(t,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}(t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})})(t);var n={initEffect:function(t){ThemeConfig.enable_photos_effect&&new WOW({boxClass:"wow",animateClass:"grid"===t?"bounceIn":"fadeIn",offset:0,mobile:!0,live:!0}).init()},initList:function(){var t,e=$(".joe_photos__gallery"),a=$(".joe_empty"),i=$(".joe_loading"),s={page:0,size:ThemeConfig.photos_page_size,sort:"createTime,desc"},c=!1,r=!0,l=!1,p=[],d=ThemeConfig.photos_layout||"grid",f=function(f){return new Promise((function(m,g){c=!0,i.show();var h=o(o({},s),f||{});""===h.team&&delete h.team,Utils.request("/api/content/photos","GET",h).then((function(o){var s,f=o.content||[];0===f.length?0===h.page&&(e.hide(),a.removeClass("hide")):(s=f,"grid"===d?function(t){if(t){var a=t.reduce((function(t,e,a){return t.concat(['<a class="item animated wow" data-wow-diration="0.3s" data-wow-delay="0.'.concat(a,'s" href="').concat(e.url,'" data-fancybox="gallery" data-caption="').concat(e.name||"",'">\n        <img width="100%" height="100%" class="lazyloadx" src="').concat(e.thumbnail,'" alt="').concat(e.name||"",'"/>\n        <span class="team" style="background-color:').concat(Utils.getRandomColor(.2,.5),'">').concat(e.team,'</span>\n        <p class="tit">').concat(e.name,'</p>\n        <div class="info">\n          <p class="animated fadeInRightBig"><i class="joe-font joe-icon-paizhao"></i><span>').concat(e.name,"</span></p>\n          ").concat(e.location?'<p class="animated fadeInRightBig"><i class="joe-font joe-icon-dingwei"></i><span>'.concat(e.location,"</span></p>"):"",'\n          <p class="animated fadeInRightBig"><i class="joe-font joe-icon-shijian"></i>').concat(Utils.formatDate(e.takeTime),"</p>\n        </div>\n      </a>")])}),[]);e.append(a.join(""))}e.justifiedGallery({rowHeight:200,maxRowHeight:!1,maxRowsCount:0,sizeRangeSuffixes:{},lastRow:"nojustify",captions:!1,waitThumbnailsLoad:!0,margins:ThemeConfig.photos_gap,extension:/\.(jpe?g|png|gif|bmp|webp)$/,cssAnimation:!1}).on("jg.complete",(function(t){r=!1,c=!1}))}(s):function(a){Masonry&&imagesLoaded&&(a&&a.forEach((function(a,o){var n=$('<a class="item masonry-item animated wow" style="margin-bottom:'.concat(ThemeConfig.photos_gap||"10",'px" data-wow-diration="0.3s" data-wow-delay="0.').concat(o,'s" href="').concat(a.url,'" data-fancybox="gallery" data-caption="').concat(a.name||"",'">\n      <img width="100%" height="100%" class="lazyload" rsrc="').concat(ThemeConfig.photo_lazyload_img||ThemeConfig.BASE_RES_URL+"/source/img/lazyload.gif",'" src="').concat(a.thumbnail,'" alt="').concat(a.name||"",'"/>\n      <span class="team" style="background-color:').concat(Utils.getRandomColor(.2,.5),'">').concat(a.team,'</span>\n      <p class="tit">').concat(a.name,'</p>\n      <div class="info">\n        <p class="animated fadeInRightBig"><i class="joe-font joe-icon-paizhao"></i><span>').concat(a.name,"</span></p>\n        ").concat(a.location?'<p class="animated fadeInRightBig"><i class="joe-font joe-icon-dingwei"></i><span>'.concat(a.location,"</span></p>"):"",'\n        <p class="animated fadeInRightBig"><i class="joe-font joe-icon-shijian"></i>').concat(Utils.formatDate(a.takeTime),"</p>\n      </div>\n    </a>"));e.append(n),t&&t.append(n).masonry("appended",n)})),e.imagesLoaded((function(){(t=e.masonry({itemSelector:".masonry-item",columnWidth:ThemeConfig.photos_gap,gutter:ThemeConfig.photos_gap,horizontalOrder:!0,percentPosition:!0,initLayout:!0,fitWidth:!0,resize:!0,transitionDuration:"0.2s"})).masonry("on","layoutComplete",(function(){console.log("waterfall layout is complete"),r=!1,c=!1}))})))}(s),r&&n.initEffect(d),a.addClass("hide"),e.show(),o.isLast?l=!0:a.addClass("hide")),i.hide(),e.show(),p=h.page>0?p.concat(f):f,m(f)})).catch((function(t){i.hide(),a.removeClass("hide"),c=!1,g(t)}))}))},m=function(t){e.empty().hide(),r=!0,l=!1,c=!1,s.page=0,f(t)};f(),window.addEventListener("scroll",Utils.throttle((function(){if($(window).scrollTop()+$(window).height()>=$(".joe_container").height()){if(c||l)return;s.page++,f({team:$(".joe_photos__filter li.active").attr("data-filter")})}}))),i.on("click",(function(t){t.stopPropagation(),$(this).attr("loading")||(s.page++,f({team:$(".joe_photos__filter li.active").attr("data-filter")}))})),$(".joe_photos__filter li").on("click",(function(t){t.stopPropagation();var e=$(this);e.hasClass("active")||(e.addClass("active").siblings("li").removeClass("active"),m({team:e.attr("data-filter")}))})),$(".joe_photos__layout-switch i").on("click",(function(a){a.stopPropagation();var o=$(this);o.hasClass("active")||(d=o.attr("data-type"),o.addClass("active").siblings("i").removeClass("active"),t=null,e.attr({class:"",style:""}).attr("class","joe_photos__gallery "+d),m({team:$(".joe_photos__filter li.active").attr("data-filter")}))}))}};return document.addEventListener("DOMContentLoaded",(function(){n.initList()})),t})()}));