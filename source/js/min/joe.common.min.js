!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var o=t();for(var a in o)("object"==typeof exports?exports:e)[a]=o[a]}}(self,(function(){return(()=>{window.encryption=function(e){return window.btoa(unescape(encodeURIComponent(e)))},window.decrypt=function(e){return decodeURIComponent(escape(window.atob(e)))};var e,t={initMode:function(){if("user"===ThemeConfig.theme_mode){var e=$("html"),o=$(".mode-light"),a=$(".mode-dark"),n=localStorage.getItem("data-mode");o["".concat("light"===n?"remove":"add","Class")]("active"),a["".concat("light"===n?"add":"remove","Class")]("active"),$(".joe_action_item.mode").on("click",(function(i){i.stopPropagation();var r="";(n=localStorage.getItem("data-mode"))?(r="light"===n?"dark":"light",o["".concat("light"===n?"add":"remove","Class")]("active"),a["".concat("light"===n?"remove":"add","Class")]("active")):(r="dark",o.removeClass("active"),a.addClass("active")),e.attr("data-mode",r),localStorage.setItem("data-mode",r),t.initCommentTheme()}))}},loadingBar:{show:function(){ThemeConfig.enable_loading_bar&&(NProgress.configure({easing:"ease",speed:500,showSpinner:!1}),NProgress.start())},hide:function(){ThemeConfig.enable_loading_bar&&NProgress.done(!0)}},initNavbar:function(){var e=$(".joe_header__above-nav a"),t=$(".panel-side-menu .link"),o=0,a=location.pathname;a&&"/"!==a&&e.each((function(e,t){a.indexOf(t.getAttribute("href"))>-1&&(o=e)}));var n=e.eq(o);n.addClass("current"),n.parents(".joe_dropdown").length&&n.parents(".joe_dropdown").find(".joe_dropdown__link a").addClass("current"),t.eq(o).addClass("current")},initCommentTheme:function(){for(var e=document.getElementsByTagName("halo-comment"),t=document.querySelector("html").getAttribute("data-mode"),o=0;o<e.length;o++){var a=e[o].shadowRoot.getElementById("halo-comment");$(a)["".concat("light"===t?"remove":"add","Class")]("dark")}},initCode:function(e){var t=$(".page-post pre, .page-journals pre, .page-sheet pre");t.length&&t.each((function(t,o){var a=$(o);if(a.find("code").length>0){if(e)return void a.find(".code-expander").off("click").on("click",(function(e){e.stopPropagation();var t=$(this),o=t.parent("pre").siblings(".toolbar").find(".autofold-tip");o&&o.remove(),t.parent("pre").toggleClass("close")}));if(ThemeConfig.enable_code_title&&a.addClass("c_title"),ThemeConfig.enable_code_hr&&a.addClass("c_hr"),ThemeConfig.enable_code_newline&&a.addClass("c_newline"),ThemeConfig.enable_code_expander&&(a.prepend('<i class="joe-font joe-icon-arrow-downb code-expander" title="折叠/展开"></i>').addClass("c_expander"),a.find(".code-expander").on("click",(function(e){e.stopPropagation();var t=$(this),o=t.parent("pre").siblings(".toolbar").find(".autofold-tip");o&&o.remove(),t.parent("pre").toggleClass("close")}))),ThemeConfig.enable_code_copy){var n=a.find("code[class*='language-']").text(),i=$('<span class="copy-button"><i class="joe-font joe-icon-copy" title="复制代码"></i></span>');new ClipboardJS(i[0],{text:function(){return n}}).on("success",(function(){return Qmsg.success("复制成功！")})),a.addClass("c_copy").append(i)}}}))},foldCode:function(){$(".page-post").length&&ThemeConfig.enable_code_expander&&ThemeConfig.fold_long_code&&$(".page-post pre[class*='language-']").each((function(e,t){var o=$(t);o.height()>ThemeConfig.long_code_height&&(o.siblings(".toolbar").find(".toolbar-item span").eq(0).append('<em class="autofold-tip"><已自动折叠></em>'),o.addClass("close"))}))},initBaidu:function(){ThemeConfig.check_baidu_collect&&$("#joe_baidu_record").length&&$.ajax({url:ThemeConfig.BASE_URL+"/halo-api/bd/iscollect",type:"GET",dataType:"json",data:{url:window.location.href},success:function(e){if(e.data&&e.data.collected)$("#joe_baidu_record").css("color","#67c23a").html("已收录");else if(ThemeConfig.baidu_token){$("#joe_baidu_record").html('<span style="color: #e6a23c">未收录，推送中...</span>');var t=setTimeout((function(){$.ajax({url:ThemeConfig.BASE_URL+"/halo-api/bd/push",type:"POST",dataType:"json",data:{site:ThemeConfig.blog_url,token:ThemeConfig.baidu_token,urls:window.location.href},success:function(e){0===e.data.success?$("#joe_baidu_record").html('<span style="color: #f56c6c">推送失败，请检查！</span>'):$("#joe_baidu_record").html('<span style="color: #67c23a">推送成功！</span>')}}),clearTimeout(t)}),1e3)}else{var o="https://ziyuan.baidu.com/linksubmit/url?sitename=".concat(encodeURI(window.location.href));$("#joe_baidu_record").html('<a target="_blank" href="'.concat(o,'" rel="noopener noreferrer nofollow" style="color: #f56c6c">未收录，提交收录</a>'))}},error:function(e){console.log(e)}})},initMusic:function(){ThemeConfig.enable_global_music_player&&$.ajax({url:"".concat(ThemeConfig.music_api,"?server=").concat(ThemeConfig.music_source,"&type=").concat(ThemeConfig.music_player_type,"&id=").concat(ThemeConfig.music_list_id),type:"GET",dataType:"json",success:function(e){new APlayer({container:document.getElementById("global-aplayer"),fixed:!0,lrcType:0,theme:ThemeConfig.music_player_theme,autoplay:ThemeConfig.music_auto_play,volume:ThemeConfig.music_player_volume,loop:ThemeConfig.music_loop_play,audio:e})},error:function(e){console.log(e)}})},back2Top:function(){if(ThemeConfig.enable_back2top){var e=$(".joe_action_item.back2top"),t=function(){return(document.documentElement.scrollTop||document.body.scrollTop)>300?e.addClass("active"):e.removeClass("active")};t(),$(document).on("scroll",Utils.throttle(t,100)),e.on("click",(function(e){e.stopPropagation(),window.scrollTo({top:0,behavior:"smooth"})}))}},initTimeCount:function(){if(!Joe.isMobile&&$(".joe_aside__item.timelife").length){var e=[{title:"今日已经过去",endTitle:"小时",num:0,percent:"0%"},{title:"这周已经过去",endTitle:"天",num:0,percent:"0%"},{title:"本月已经过去",endTitle:"天",num:0,percent:"0%"},{title:"今年已经过去",endTitle:"个月",num:0,percent:"0%"}],t=(+new Date-new Date((new Date).toLocaleDateString()).getTime())/1e3/60/60,o=t/24*100;e[0].num=parseInt(t),e[0].percent=parseInt(o)+"%";var a={0:7,1:1,2:2,3:3,4:4,5:5,6:6}[(new Date).getDay()],n=a/7*100;e[1].num=parseInt(a),e[1].percent=parseInt(n)+"%";var i=(new Date).getFullYear(),r=(new Date).getDate(),c=(new Date).getMonth()+1,l=r/new Date(i,c,0).getDate()*100;e[2].num=r,e[2].percent=parseInt(l)+"%";var s=(new Date).getMonth()+1,d=s/12*100;e[3].num=s,e[3].percent=parseInt(d)+"%";var f="";e.forEach((function(e,t){f+='\n\t\t\t\t\t\t<div class="item">\n\t\t\t\t\t\t\t<div class="title">\n\t\t\t\t\t\t\t\t'.concat(e.title,'\n\t\t\t\t\t\t\t\t<span class="text">').concat(e.num,"</span>\n\t\t\t\t\t\t\t\t").concat(e.endTitle,'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="progress">\n\t\t\t\t\t\t\t\t<div class="progress-bar">\n\t\t\t\t\t\t\t\t\t<div class="progress-bar-inner progress-bar-inner-').concat(t,'" style="width: ').concat(e.percent,'"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="progress-percentage">').concat(e.percent,"</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>")})),$(".joe_aside__item.timelife .joe_aside__item-contain").html(f)}},initWeather:function(){!Joe.isMobile&&ThemeConfig.enable_weather&&ThemeConfig.weather_key&&$("#he-plugin-simple").length&&(window.WIDGET={CONFIG:{modules:"120",background:"5",tmpColor:"FFFFFF",tmpSize:"13",cityColor:"FFFFFF",citySize:"13",aqiColor:"FFFFFF",aqiSize:"13",weatherIconSize:"13",alertIconSize:"13",padding:"5px 5px 4px 5px",shadow:"0",language:"auto",borderRadius:"4",fixed:"true",vertical:"top",horizontal:"left",key:ThemeConfig.weather_key}},$.getScript("https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"))},initGallery:function(){var e=$(".page-post .joe_detail__article img:not([class]), .page-journals .joe_journal_block img:not([class]), .page-sheet img:not([class])");e.length&&e.each((function(){var e=$(this);e.wrap($('<span style="display: block;" data-fancybox="Joe" href="'.concat(e.attr("src"),'"></span>')))}))},initExternalLink:function(){var e=$(".page-post .joe_detail__article a[href], .joe_journal_body a[href]");e.length&&e.each((function(){$(this).attr({target:"_blank",rel:"noopener noreferrer nofollow"})}))},init3dTag:function(){!Joe.isMobile&&ThemeConfig.enable_tag_cloud&&"3d"===ThemeConfig.tag_cloud_type&&$(".tags-cloud-list").length&&$.getScript("".concat(ThemeConfig.BASE_RES_URL,"/source/lib/3dtag/3dtag.min.js"),(function(e){var t=[],o=["#F8D800","#0396FF","#EA5455","#7367F0","#32CCBC","#F6416C","#28C76F","#9F44D3","#F55555","#736EFE","#E96D71","#DE4313","#D939CD","#4C83FF","#F072B6","#C346C2","#5961F9","#FD6585","#465EFB","#FFC600","#FA742B","#5151E5","#BB4E75","#FF52E5","#49C628","#00EAFF","#F067B4","#F067B4","#ff9a9e","#00f2fe","#4facfe","#f093fb","#6fa3ef","#bc99c4","#46c47c","#f9bb3c","#e8583d","#f68e5f"];$(".tags-cloud-list a").each((function(e,a){var n,i;t.push({label:$(a).attr("data-label"),url:$(a).attr("data-url"),target:"_blank",fontColor:o[(n=0,i=o.length-1,n=Math.ceil(n),i=Math.floor(i),Math.floor(Math.random()*(i-n+1))+n)],fontSize:16})})),$("#tags-3d").svg3DTagCloud({entries:t,width:250,height:250,radius:"65%",radiusMin:75,bgDraw:!1,fov:800,speed:.5,fontWeight:500}),$(".tags-cloud-list").remove(),$("#tags-3d .empty").remove()}))},searchDialog:function(){var e=$(".joe_header__above-search .result");$(".joe_header__above-search .input").on("click",(function(t){t.stopPropagation(),e.addClass("active")})),$(document).on("click",(function(){e.removeClass("active")}))},initDropMenu:function(){$(".joe_dropdown").each((function(e,t){var o=this,a=$(this).find(".joe_dropdown__menu"),n=$(t).attr("trigger")||"click",i=$(t).attr("placement")||$(this).height()||0;a.css("top",i),"hover"===n?$(this).hover((function(){return $(o).addClass("active")}),(function(){return $(o).removeClass("active")})):($(this).on("click",(function(e){var t=this;e.stopPropagation(),$(this).toggleClass("active"),$(document).one("click",(function(){return $(t).removeClass("active")})),e.stopPropagation()})),a.on("click",(function(e){return e.stopPropagation()})))}))},drawerMobile:function(){$(".joe_header__above-slideicon").on("click",(function(e){e.stopPropagation(),$(".joe_header__searchout").removeClass("active");var t=$("html"),o=$(".joe_header__mask"),a=$(".joe_header__slideout");a.hasClass("active")?(t.removeClass("disable-scroll"),o.removeClass("active slideout"),a.removeClass("active")):(t.addClass("disable-scroll"),o.addClass("active slideout"),a.addClass("active"))}))},searchMobile:function(){$(".joe_header__above-searchicon").on("click",(function(e){e.stopPropagation(),$(".joe_header__slideout").removeClass("active");var t=$("html"),o=$(".joe_header__mask"),a=$(".joe_header__searchout");a.hasClass("active")?(t.removeClass("disable-scroll"),o.removeClass("active slideout"),a.removeClass("active")):(t.addClass("disable-scroll"),o.addClass("active"),a.addClass("active"))}))},maskClose:function(){$(".joe_header__mask").on("click",(function(e){e.stopPropagation(),$("html").removeClass("disable-scroll"),$(".joe_header__mask").removeClass("active slideout"),$(".joe_header__searchout").removeClass("active"),$(".joe_header__slideout").removeClass("active")})).on("touchmove",(function(e){return e.preventDefault}))},sideMenuMobile:function(){$(".joe_header__slideout-menu .current").parents(".panel-body").show().siblings(".panel").addClass("in"),$(".joe_header__slideout-menu .panel").on("click",(function(e){e.stopPropagation();var t=$(this).parent().parent();t.find(".panel").not($(this)).removeClass("in"),t.find(".panel-body").not($(this).siblings(".panel-body")).stop().hide("fast"),$(this).toggleClass("in").siblings(".panel-body").stop().toggle("fast")}))},initHeadScroll:function(){if(!Joe.isMobile){var e=!0,t=function(t){if(window.pageYOffset>=$(".joe_header").height()&&t<=0){if(e)return;$(".joe_header").addClass("active"),$(".joe_aside .joe_aside__item:last-child").css("top",$(".joe_header").height()-60+15),e=!0}else{if(!e)return;$(".joe_header").removeClass("active"),$(".joe_aside .joe_aside__item:last-child").css("top",$(".joe_header").height()+15),e=!1}},o=window.pageYOffset;t(o);var a=Date.now();document.addEventListener("scroll",Utils.throttle((function(){var e=Date.now();e-a>15&&(t(o-window.pageYOffset),o=window.pageYOffset),a=e}),100))}},initMathjax:function(){var e=PageAttrs.metas.enable_mathjax&&""!=PageAttrs.metas.enable_mathjax.trim()?PageAttrs.metas.enable_mathjax.trim():ThemeConfig.enable_mathjax;/^true$/.test(e)&&window.katex&&renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})},renderReplyEmoji:function(){$(".aside-reply-content").each((function(e,t){var o=marked(t.innerHTML).replace(/<img\ssrc[^>]*>/gm,'<i class="joe-font joe-icon-tupian"></i>').replace(/bili\//g,"bili/hd/ic_emoji_"),a=Utils.renderedEmojiHtml(o);t.innerHTML=Utils.return2Br(a)}))},cancelSpaceScroll:function(){document.body.onkeydown=function(e){var t=(e=e||window.event).target||e.srcElement;if(32===(e.keyCode||e.charCode)){if(["text","input","textarea","halo-comment"].includes(t.tagName.toLowerCase()))return;window.event?e.returnValue=!1:e.preventDefault()}}},scrollToHash:function(){var e=new URLSearchParams(location.search).get("scroll");if(e){var t=$(".joe_header").height(),o=null;if((o=$("#"+e).length>0?$("#"+e):$("."+e))&&o.length>0){var a=o.offset().top-t-15;window.scrollTo({top:a,behavior:"smooth"})}}},loadMouseEffect:function(){Joe.isMobile||ThemeConfig.enable_clean_mode||"off"===ThemeConfig.cursor_effect||$.getScript("".concat(ThemeConfig.BASE_RES_URL,"/source/effect/cursor/").concat(ThemeConfig.cursor_effect,".js"))},loadBackdropEffect:function(){Joe.isMobile||ThemeConfig.enable_clean_mode||"off"===ThemeConfig.backdrop||$.getScript("".concat(ThemeConfig.BASE_RES_URL,"/source/effect/backdrop/").concat(ThemeConfig.backdrop,".js"))},setFavicon:function(){if(ThemeConfig.favicon){var e=new Favico,t=new Image;t.onload=function(){e.image(t)},t.src=ThemeConfig.favicon}},offscreenTip:function(){if(ThemeConfig.enable_offscreen_tip){var e=document.title,t=null;document.addEventListener("visibilitychange",(function(){location.href.indexOf(ThemeConfig.blog_url)>0||"/"!==location.pathname||(document.hidden?(document.title=ThemeConfig.offscreen_title_leave||"歪，你去哪里了？",clearTimeout(t)):(document.title=ThemeConfig.offscreen_title_back||"(つェ⊂)咦，又回来了!",t=setTimeout((function(){document.title=e}),2e3)))}))}},initBirthday:function(){if(ThemeConfig.enable_birthday)if(/^\d+$/.test(ThemeConfig.birthday)||/^(\d{4}\/\d{1,2}\/\d{1,2}\s\d{1,2}:\d{1,2}(:\d{0,2})?)$/.test(ThemeConfig.birthday)){var e=new Date(/^\d+$/g.test(ThemeConfig.birthday)?+ThemeConfig.birthday:ThemeConfig.birthday),t=$(".joe_run__day"),o=$(".joe_run__hour"),a=$(".joe_run__minute"),n=$(".joe_run__second"),i=function(){var i=(+new Date-e.getTime())/864e5,r=Math.floor(i),c=24*(i-r),l=Math.floor(c),s=60*(c-l),d=Math.floor(s),f=60*(s-d),h=Math.floor(f);i=String(r).padStart(2,0),c=String(l).padStart(2,0),s=String(d).padStart(2,0),f=String(h).padStart(2,0),t.html(i),o.html(c),a.html(s),n.html(f)};i(),setInterval(i,1e3)}else Qmsg.error("“自定义博客起始时间” 格式错误，请检查！")},showLoadTime:function(){if(ThemeConfig.show_loaded_time){var e=performance.now();e&&console.log("%c页面加载耗时："+Math.round(e)+" ms","padding: 6px 8px;color:#fff;background:linear-gradient(270deg, #4edb21, #f15206);border-radius: 3px;")}},clean:function(){$("#compatiable-checker").remove(),$("#theme-config-getter").remove(),$("#metas-getter").remove(),$("#theme-config-getter").remove(),t.loadingBar.hide()}};return e=["loadingBar","initHeadScroll","init3dTag","foldCode","scrollToHash","loadMouseEffect","loadBackdropEffect","setFavicon","showLoadTime","clean"],document.addEventListener("DOMContentLoaded",(function(){t.loadingBar.show(),Object.keys(t).forEach((function(o){return!e.includes(o)&&t[o]()}))})),window.addEventListener("load",(function(){1===e.length?t[e[0]]():e.forEach((function(e){return"loadingBar"!==e&&t[e]()}))})),window.commonContext=t,{}})()}));